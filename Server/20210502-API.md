## :star: API

API라는 말은 수도 없이 많이 들었지만, 정확한 뜻과 쓰임새를 잘 몰랐다. 오늘은 API에 대해서 배워보자.

### API란 무엇일까?

앞에서 식당으로 클라이언트와 서버를 나누었었다. 클라이언트는 구축한 서버를 가지고 개발을 해야 한다. 그러면 서버의 구조를 다 알고 코드도 알고 있어야 할까? 아니다. 바로 서버에서 구축한 API를 통해서 클라이언트는 개발을 할 수 있다. 그러면 API가 정확히 무엇인지 예를 통해 알아보면 이해하기 편할 것이다.

### 국방부 장관

국방부 장관에 대해서 예를 들어보겠다. 만약 국방부 장관이 핵폭탄은 사용하려고 한다. 그러면 국방부 장관은 핵폭탄의 로직을 다 알고 있어야만 핵폭탄을 터뜨릴 수 있을까? 아니다. 바로 국방부 장관은 많은 기술자들이 발명한 핵폭탄을 버튼 하나만을 가지고 터뜨릴 수 있을 것이다. 이러한 버튼을 `API`라고 생각하면 이해하기 쉽다.

### API

이제 `API`가 대충 어떤 역할을 하는지에 대해서는 알았다. 그러면 이러한 API가 어떻게 연결이 되는지 알아보자. API는 Web Server 역할을 한다. 웹 서버는 http 통신 규약을 이용해 통신을 한다. 이 통신에는 패킷이 들어있다. 패킷 안에는 header와 body로 구성되어 있다.

- header : Metadata
- body : Data (진짜 데이터)

이러한 http는 몇 가지의 방법론이 존재한다. 바로 `GET` / `POST` / `PUT` / `PATCH` / `DELETE`가 있다. 하나하나 역할들을 살펴보면 다음과 같다.

- GET : 데이터 조회
- POST : 데이터 생성
- PUT : 데이터 전체 수정
- PATCH : 데이터 부분 수정
- DELETE : 데이터 삭제

### GET

GET은 앞에서 설명한 것과 같이 데이터를 조회한다. 따라서 데이터를 넘겨주는  과정이 필요하다. GET의 구조는 네이버로 예를 들어 보겠다.

https://search.naver.com/search.naver?sm=tab_hty.top&where=nexearch&query=소프트+스퀘어드&oquery=소프트웨어&tqi=h4IDKlprvTossNVGjOVssssstEo-389502

위에 검색을 예로 들어보면 sm=tab_hty.top & where=nexearch & query=소프트+스퀘어드 등 똑같은 형식이 반복된다. 대표적인 GET 형식의 데이터 조회 형식이다. GET은 `Key-Value` 구조로 되어있다. 위에서 키를 살펴보면 sm, where, query 등이 될 것이고 밸류를 살펴보면 tab_hty.top, 소프트+스퀘어드 등 밸류가 될 것이다.

### POST

포스트는 데이터를 생성하는 역할을 한다. 그래서 POST는 포맷이 존재한다. 포맷의 종류에는 `xml` / `Json` 등이 있다. xml과 Json의 차이는 직접 두 개의 파일을 조회해 보면 알 것이다. 요즘에는 `Json`이 더 많이 사용된다고 한다. 그 이유는 찾아보면 한 번에 알게 될 것이다.

## RESTFUL API

REST는 REpresentational State Transfer의 약자로 `HTTP` 기반으로 필요한 자원에 접근하는 방식을 정해놓은 규칙을 뜻한다. REST에는 몇 가지의 속성들이 존재한다.

- 서버에 있는 모든 리소스는 클라이언트가 바로 접근할 수 있는 고유 URI가 존재한다.
- 클라이언트가 요청할 때마다 필요한 정보를 주기 때문에 서버에서는 세션 정보를 포괄할 필요가 없다.
- 위에서 설명한 메서드들을 사용한다.
- 서브시 내 하나의 리소스가 주변에 연관된 리소스들과 연결되어 표현되어야 한다.

그리고 REST는 resource / method/ message 세 가지로 구성되어 있다.

### Resource

위에서 REST에서는 URI로 자원에 접근하기 때문에 지켜야 하는 규칙들이 존재한다.

- `/`는 계층 관계를 나타내는데 사용되며 마지막 문자로는 사용하지 않는다.
- URI를 구성하는 리소스들은 명사로 이루어져야하며 소문자로 작성한다.
- URI에서는 `-`을 권장한다.
- 파일 확장자는 포함시키지 않는다.
