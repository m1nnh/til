## :star:  SQL Optimizer And Fundamental Principles

### :speech_balloon: 옵티마이저 실행 계획

#### 1. 옵티마이저
- 옵티마이저는 사용자가 질의한 SQL문에 대해 최적의 실행 방법을 결정하는 역할을 수행한다. 이러한 최적의 실행 방법을 실행계획이라고 한다.
- 규칙 기반 옵티마이저 : 우선순위를 가지고 실행계획을 생성한다.
    - 규칙 1. Single row by rowid : rowid를 통해서 테이블에서 하나의 행을 엑세스 하는 방식이다. rowid는 행이 포함된 데이터 파일, 블록 등의 정보를 가지고 있기 대문에 다른 정보를 참조하지 않고도 바로 원하는 행을 액세스할 수 있다.
    - 규칙 4. Single row by unique or primary key : 유일 인데스를 통해서 하나의 행을 액세스 하는 방식이다. 이 방식은 인덱스를 먼저 액세스하고 인덱스에 존재하는 rowid를 추출하여 테이블의 행을 액세스한다.
    - 규칙 8. Composite index : 복합 인덱스 등등 조건으로 검색하는 경우이다.
    - 규칙 9. Single column index : 단일 칼럼 인덱스에 '='조건으로 검색하는 경우이다.
    - 규칙 10. Bounded range search on indexed columns : 인덱스가 생성되어 있는 칼럼에 양쪽 범위를 한정하는 형태로 검색하는 방식이다.
    - 규칙 11. Unbounded range search on indexed columns : 인덱스가 생성되어 있는 칼럼에 한쪽 범위만 한정하는 형태로 검색하는 방식이다.
    - 규칙 15. Full table scan : 전체 테이블을 액세스 하면서 조건절에 주어진 조건을 만족하는 행만을 결과로 추출한다.
- 비용기반 옵티마이저 : 규칙기반 옵티마이저의 단점을 극복하기 위해서 출현하였다.

#### 2. 실행계획
- 실행계획이란 SQL에서 요규한 사항을 처리하기 위한 절차와 방법을 의미한다.
- 실행계획을 구성하는 요소
    - 조인 순서(Join Order)
    - 조인 기법(Join Method) : NL Join, Hash Join, Sort Merge Join
    - 액세스 기법(Access Method) : 하나의 테이블을 액세스할 때 
    - 최적화 정보(Optimization Information) : 옵티마이저가 실행계획의 각 단계마다 예상되는 비용 사항을 표시
    - 연산(Operation) 

#### 3. SQL 처리 흐름도
- SQL 처리 흐름도란 SQL의 내부적인 처리 절차를 시각적으로 표현한 도표이다.

### :speech_balloon: 인덱스 기본

#### 1. 인덱스 특징과 종류
- 인덱스는 원하는 데이터를 쉽게 찾을 수 있도록 돕는 책의 찾아보기와 유사한 개념이다.
- 인덱스의 기본적인 목적은 검색 성능의 최적화이다.

#### 2. 전체 테이블 스캔과 인덱스 스캔
- 전체 테이블 스캔 : 테이블에 존재하는 모든 데이터를 읽어 가면서 조건에 맞으면 결과로써 추출하고 조건에 맞지 않으면 버리는 방식으로 검색한다.
- 인덱스 스캔 : 인덱스를 구성하는 칼럼의 값을 기반으로 데이터를 추출하는 액세스 기법이다.
    - 인덱스 유일 스캔 : 유일 인덱스를 사용하여 단 하나의 데이터를 추출하는 방식이다.
    - 인덱스 범위 스캔 : 인덱스를 이용하여 한 건 이상의 데이터를 추출하는 방식이다.

### :speech_balloon: 조인 수행 원리

#### 1. NL Join
- NL Join은 프로그래밍에서 사용하는 중첩된 반복문과 유사한 방식으로 조인을 수행한다.
- 반복문의 외부에 있는 테이블을 선행테이블 또는 외부 테이블이라 하고, 반복문 내부에 있는 테이블을 후행 테이블 또는 내부 테이블이라고 한다.
- For 선행 테이블 읽음 -> 외부 테이블 For 후행 테이블 읽음 -> 내부 테이블

#### 2. Sort Merge Join
- Sort Merge Join은 조인 칼럼을 기준으로 데이터를 정렬하여 조인을 수행한다.

#### 3. Hash Join
- 해슁 기법을 이용하여 조인을 수행한다.
- 해쉬 조인은 NL의 랜덤 액세스 문제점과 Sort Merge 정렬 작업의 문제점의 부담을 해결하기 위한 대안으로 등장하였다.