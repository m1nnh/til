## 네트워킹

네트워킹이란 두 대 이상의 컴퓨터를 케이블로 연결하여 네트워크를 구성하는 것을 말한다. 자바에서 제공하는 `java.net` 패키지를 사용하면 네트워크 애플리케이션의 데이터 통신 부분을 쉽게 작성할 수 있으며, 간단한 네트워크 애플리케이션은 단 몇 줄의 자바코드 만으로도 작성이 가능하다.

### 클라이언트/서버

<center><img src = "https://user-images.githubusercontent.com/46131688/104481633-5bd03c00-5609-11eb-8502-c26258348162.png"></center>

서버는 서비스를 제공하는 컴퓨터이고, 클라이언트는 서비스를 사용하는 컴퓨터이다. 서버가 서비스를 제공하기 위해서는 서버 프로그램이 있어야 하고 클라이언트가 서비스를 제공받기 위해서는 서버 프로그램과 연결할 수 있는 클라이언트 프로그램이 있어야 한다.

### IP 주소

`IP`주소는 컴퓨터(호스트)를 구별하는데 사용되는 고유한 값으로 인터넷에 연결된 모든 컴퓨터는 IP 주소를 가지고 있는다. IP 주소를 `4btye`의 정수로 구성되어 있으며 4개의 정수가 마침표를 구분자로 "a.b.c.d"와 같은 형식으로 표현된다. 여기서 a, b, c, d는 부호없는 1byte값, 즉 0 ~ 255 사이의 정수이다.

자바에서는 IP 주소를 다루기 위한 클래스로 `InetAddress`를 제공하며 다음과 같은 메서드가 정의되어 있다.

- byte[] getAddress() : IP 주소를 byte 배열로 반환한다.
- static InetAddress[], getAllByName(String host) : 도메인명에 지정된 모든 호스트의 IP 주소를 배열에 담아 반환한다.
- static InetAddress, getByAddress(byte[] addr) : byte 배열을 통해 IP 주소를 얻는다.
- static InetAddress, getByName(String host) : 도메인명을 통해 IP 주소를 얻는다.
- String getCanonicalHostName() : FQDN(fully qualified domain name)을 반환한다.
- String getHostAddress() : 호스트의 IP 주소를 반환한다.
- String getHostName() : 호스트의 이름을 반환한다.
- static InetAddress getLocalHost() : 지역 호스트의 IP 주소를 반환한다.
- boolean isMulticastAddress() : IP 주소가 멀티캐스트 주소인지 알려준다.
- boolean isLoopbackAddress() : IP 주소가 loopback 주소(127.0.0.1)인지 알려준다.

### URL

`URL`은 인터넷에 존재하는 여러 서버들이 제공하는 자원에 접근할 수 있는 주소를 표현하기 위한 것으로 '프로토콜'://호스트명:포트번호/경로명...의 형태로 이루어져 있다.

- 프로토콜 : 자원에 접근하기 위해 서버와 통신하는데 사용되는 통신규약
- 호스트명 : 자원을 제공하는 서버의 이름
- 포트번호 : 통신에 사용되는 서버의 포트번호

### URLConnection

`URLConnection`은 애플리케이션과 URL간의 통신 연결을 나타내는 클래스의 최상위 클래스로 추상클래스이다. URLConnection을 상속받아 구현한 클래스로는 `HttpURLConnection`과 `JarURLConnection`이 있으며 URL의 프로토콜이 `http` 프로토콜이라면 `openConnection()`은 Http URLConnection을 반환한다. URLConnection을 사용해서 연결하고자 하는 자원에 접근하고 읽고 쓰기를 할 수 있다.

### 소켓 프로그래밍

소켓 프로그래밍은 소켓을 이용한 통신 프로그래밍을 뜻하는데, 소켓이란 프로세스간의 통신에 사용되는 양쪽 끝단을 의미한다. 서로 멀리 떨어진 두 사람이 통신하기 위해서 전화기가 필요한 것처럼, 프로세스간의 통신을 위해서는 그 무언가가 필요하고 그것이 바로 소켓이다. 자바에서는 `java.net` 패키지를 통해 소켓 프로그래밍을 지원하는데, 소켓 통신에 사용되는 프로토콜에 따라 다른 종류의 소켓을 구현하여 제공한다.

TCP/IP 프로토콜은 이기종 시스템간의 통신을 위한 표준 프로토콜로 프로토콜의 집합이다. TCP와 UDP 모두 TCP/IP 프로토콜에 포함되어 있으며, OSI 7계층의 전송계층에 해당하는 프로토콜이다.

### TCP

TCP 소켓 프로그래밍은 클라이언트와 서버간의 일대일 통신이다. 먼저 서버 프로그램이 실행되어 클라이언트 프로그램의 연결요청을 기다리고 있어야한다. 서버 프로그램과 클라이언트 프로그램간의 통신과정을 단계별로 보면 다음과 같다.

- 서버 프로그램에서는 서버 소켓을 사용해서 서버 컴퓨터의 특정 포트에서 클라이언트의 연결 요청을 처리할 준비를 한다.
- 클라이언트 프로그램은 접속할 서버의 IP 주소와 포트 정보를 가지고 소켓을  생성해서 서버에 연결을 요청한다.
- 서버 소켓은 클라이언트의 연결 요청을 받으면 서버에 새로운 소켓을 생성해서 클라이언트의 소켓과 연결되도록 한다.
- 이제 클라이언트이 소켓과 새로 생성된 서버의 소켓은 서버 소켓과 관계없이 일대일 통신을 한다.

TCP의 특징은 다음과 같다.

- 데이터의 경계를 구분하지 않는다.
- 신뢰성 있는 데이터를 전송한다.
    - 데이터의 전송 순서가 보장된다.
    - 데이터의 수신 여부를 확인한다.
    - 패킷을 관리할 필요가 없다.
- UDP보다 전송속도가 느리다.

### UDP

TCP 소켓 프로그래밍에서는 `Socket`과 `ServerSocket`을 사용하지만, UDP 소켓 프로그래밍에서는 `DatagramSocket`과 `DatagramPacket`을 사용한다. UDP의 특징은 다음과 같다.

- 비연결기반
- 데이터의 경계를 구분한다.
- 신뢰성 없는 데이터 전송
    - 데이터의 전송 순서가 바뀔 수 있다.
    - 데이터의 수신 여부를 확인하지 않는다.
    - 패킷을 관리해주어야 한다.
- TCP보다 전송속도가 빠르다.
